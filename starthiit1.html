import React, { useState, useEffect } from 'react';
import { View, Text, TouchableOpacity, StyleSheet } from 'react-native';

export default function HIITTimer() {
    const [time, setTime] = useState(4);
    const [isActive, setIsActive] = useState(false);

    useEffect(() => {
        let timer;
        if (isActive && time > 0) {
            timer = setInterval(() => setTime(time - 1), 1000);
        } else if (time === 0) {
            setIsActive(false);
        }
        return () => clearInterval(timer);
    }, [isActive, time]);

    const handleStartPause = () => setIsActive(!isActive);
    const handleReset = () => {
        setIsActive(false);
        setTime(4);
    };

    return (
        <View style={styles.container}>
            <View style={styles.header}>
                <Text style={styles.backArrow}>&#x2190;</Text>
                <Text style={styles.title}>HIIT</Text>
                <Text style={styles.timerDisplay}>5:00</Text>
            </View>

            <View style={styles.content}>
                <Text style={styles.exerciseTitle}>Prisoner's Squat</Text>
                <Text style={styles.getReady}>Get Ready</Text>
                <View style={styles.timerCircle}>
                    <Text style={styles.countdown}>{`0:0${time}`}</Text>
                </View>

                <View style={styles.controls}>
                    <TouchableOpacity onPress={handleReset} style={styles.controlButton}>
                        <Text>&#x23EA;</Text>
                    </TouchableOpacity>

                    <TouchableOpacity onPress={handleStartPause} style={styles.controlButton}>
                        <Text>{isActive ? 'Pause' : 'Start'}</Text>
                    </TouchableOpacity>

                    <TouchableOpacity onPress={handleReset} style={styles.controlButton}>
                        <Text>&#x23E9;</Text>
                    </TouchableOpacity>
                </View>
            </View>
        </View>
    );
}

const styles = StyleSheet.create({
    container: { flex: 1, backgroundColor: '#121212', color: '#9C27B0' },
    header: { flexDirection: 'row', justifyContent: 'space-between', padding: 15, backgroundColor: '#9C27B0', color: '#fff' },
    backArrow: { fontSize: 24, color: '#fff' },
    title: { fontSize: 20, color: '#fff' },
    timerDisplay: { fontSize: 18, color: '#FF5722' },
    content: { flex: 1, alignItems: 'center', justifyContent: 'center' },
    exerciseTitle: { fontSize: 22, color: '#fff', marginBottom: 5 },
    getReady: { color: '#9C27B0', fontSize: 16, marginBottom: 20 },
    timerCircle: { width: 100, height: 100, borderRadius: 50, borderWidth: 4, borderColor: '#9C27B0', alignItems: 'center', justifyContent: 'center' },
    countdown: { fontSize: 28, color: '#9C27B0' },
    controls: { flexDirection: 'row', marginTop: 20 },
    controlButton: { backgroundColor: '#9C27B0', padding: 10, borderRadius: 10, marginHorizontal: 10, color: '#fff' }
});




